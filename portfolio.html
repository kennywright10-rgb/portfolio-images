<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Model Portfolio</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #000;
            color: #fff;
        }

        /* Hero Section */
        .hero {
            height: 100vh;
            width: 100%;
            position: relative;
            overflow: hidden;
        }

        .hero img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .hero-name {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #fff;
            font-size: 72px;
            font-weight: 300;
            letter-spacing: 8px;
            text-transform: uppercase;
            text-shadow: 2px 2px 20px rgba(0,0,0,0.3);
            z-index: 10;
        }

        /* Admin Toggle Button */
        .admin-toggle {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: #fff;
            border: none;
            cursor: pointer;
            z-index: 1000;
            font-size: 24px;
            box-shadow: 0 4px 20px rgba(255,255,255,0.3);
            transition: transform 0.2s;
        }

        .admin-toggle:hover {
            transform: scale(1.1);
        }

        /* Admin Panel */
        .admin-panel {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100vh;
            background: #1a1a1a;
            box-shadow: -5px 0 30px rgba(0,0,0,0.5);
            z-index: 999;
            transition: right 0.3s ease;
            overflow-y: auto;
            padding: 30px;
        }

        .admin-panel.active {
            right: 0;
        }

        .admin-panel h2 {
            margin-bottom: 30px;
            font-size: 24px;
        }

        .admin-section {
            margin-bottom: 30px;
        }

        .admin-section h3 {
            font-size: 16px;
            margin-bottom: 15px;
            color: #aaa;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .admin-panel input[type="file"] {
            display: none;
        }

        .upload-btn {
            width: 100%;
            padding: 15px;
            background: #fff;
            color: #000;
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 10px;
            transition: background 0.2s;
        }

        .upload-btn:hover {
            background: #ddd;
        }

        .image-manager {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .image-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: #2a2a2a;
            border-radius: 5px;
        }

        .image-item img {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 3px;
        }

        .image-item button {
            margin-left: auto;
            padding: 8px 15px;
            background: #ff4444;
            color: #fff;
            border: none;
            cursor: pointer;
            border-radius: 3px;
            font-size: 12px;
        }

        .image-item button:hover {
            background: #cc0000;
        }

        /* Image Grid */
        .grid-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 32px;
            background: #fff;
            padding: 32px;
        }

        .grid-item {
            aspect-ratio: 3/4;
            overflow: hidden;
            background: #fff;
        }

        .grid-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            transition: transform 0.3s ease;
        }

        .grid-item:hover img {
            transform: scale(1.05);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .grid-container {
                grid-template-columns: repeat(2, 1fr);
            }

            .admin-panel {
                width: 100%;
                right: -100%;
            }

            .hero-name {
                font-size: 36px;
                letter-spacing: 4px;
            }
        }

        .empty-state {
            padding: 60px 20px;
            text-align: center;
            color: #666;
            font-size: 18px;
        }
    </style>
</head>
<body>
    <!-- Hero Section -->
    <div class="hero">
        <img id="heroImage" src="https://images.unsplash.com/photo-1529139574466-a303027c1d8b?w=1600&h=2400&fit=crop" alt="Hero">
        <div class="hero-name">Geneva Wright</div>
    </div>

    <!-- Image Grid -->
    <div class="grid-container" id="gridContainer">
        <!-- Default demo images -->
        <div class="grid-item"><img src="https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?w=800&h=1200&fit=crop" alt="Portfolio"></div>
        <div class="grid-item"><img src="https://images.unsplash.com/photo-1509631179647-0177331693ae?w=800&h=1200&fit=crop" alt="Portfolio"></div>
        <div class="grid-item"><img src="https://images.unsplash.com/photo-1524504388940-b1c1722653e1?w=800&h=1200&fit=crop" alt="Portfolio"></div>
        <div class="grid-item"><img src="https://images.unsplash.com/photo-1488426862026-3ee34a7d66df?w=800&h=1200&fit=crop" alt="Portfolio"></div>
        <div class="grid-item"><img src="https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=800&h=1200&fit=crop" alt="Portfolio"></div>
        <div class="grid-item"><img src="https://images.unsplash.com/photo-1496440737103-cd596325d314?w=800&h=1200&fit=crop" alt="Portfolio"></div>
    </div>

    <!-- Admin Toggle Button -->
    <button class="admin-toggle" onclick="toggleAdmin()">⚙️</button>

    <!-- Admin Panel -->
    <div class="admin-panel" id="adminPanel">
        <h2>Admin Panel</h2>
        
        <div class="admin-section">
            <h3>Hero Image</h3>
            <input type="file" id="heroUpload" accept="image/*" onchange="uploadHeroImage(event)">
            <label for="heroUpload" class="upload-btn">Change Hero Image</label>
        </div>

        <div class="admin-section">
            <h3>Hero Name</h3>
            <input type="text" id="heroNameInput" placeholder="Enter name" style="width: 100%; padding: 12px; margin-bottom: 10px; background: #2a2a2a; border: 1px solid #444; color: #fff; font-size: 16px; border-radius: 3px;">
            <input type="color" id="heroColorInput" value="#ffffff" style="width: 100%; height: 50px; margin-bottom: 10px; cursor: pointer; border: 1px solid #444; background: #2a2a2a; border-radius: 3px;">
            <button onclick="updateHeroName()" class="upload-btn">Update Name</button>
        </div>

        <div class="admin-section">
            <h3>Grid Images</h3>
            <input type="file" id="gridUpload" accept="image/*" multiple onchange="uploadGridImages(event)">
            <label for="gridUpload" class="upload-btn">Add Grid Images</label>
            
            <div class="image-manager" id="imageManager"></div>
        </div>
    </div>

    <script>
        // GitHub Configuration - UPDATE THESE VALUES
        const GITHUB_CONFIG = {
            owner: 'kennywright10-rgb',  // e.g., 'genevawright'
            repo: 'portfolio-images',        // Repository name
            token: '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',      // Personal access token
            branch: 'main'
        };

        // Initialize from GitHub
        let heroImageUrl = null;
        let gridImages = [];
        let heroName = 'Geneva Wright';
        let heroColor = '#ffffff';
        let isLoading = false;

        // Load saved data on page load
        window.onload = async function() {
            await loadFromGitHub();
            renderGrid();
            renderImageManager();
        };

        // Load portfolio data from GitHub
        async function loadFromGitHub() {
            try {
                isLoading = true;
                
                // Try to fetch portfolio.json from GitHub
                const response = await fetch(
                    `https://api.github.com/repos/${GITHUB_CONFIG.owner}/${GITHUB_CONFIG.repo}/contents/portfolio.json?ref=${GITHUB_CONFIG.branch}`,
                    {
                        headers: {
                            'Authorization': `token ${GITHUB_CONFIG.token}`,
                            'Accept': 'application/vnd.github.v3+json'
                        }
                    }
                );

                if (response.ok) {
                    const data = await response.json();
                    const content = JSON.parse(atob(data.content));
                    
                    heroImageUrl = content.heroImage || null;
                    gridImages = content.gridImages || [];
                    heroName = content.heroName || 'Geneva Wright';
                    heroColor = content.heroColor || '#ffffff';
                    
                    // Apply loaded data
                    if (heroImageUrl) {
                        document.getElementById('heroImage').src = heroImageUrl;
                    }
                    
                    document.querySelector('.hero-name').textContent = heroName;
                    document.querySelector('.hero-name').style.color = heroColor;
                    document.getElementById('heroNameInput').value = heroName;
                    document.getElementById('heroColorInput').value = heroColor;
                }
            } catch (error) {
                console.log('No existing portfolio data, starting fresh');
            } finally {
                isLoading = false;
            }
        }

        // Save portfolio data to GitHub
        async function saveToGitHub() {
            if (isLoading) return;
            
            try {
                isLoading = true;
                
                // Get current file SHA if it exists
                let sha = null;
                try {
                    const checkResponse = await fetch(
                        `https://api.github.com/repos/${GITHUB_CONFIG.owner}/${GITHUB_CONFIG.repo}/contents/portfolio.json?ref=${GITHUB_CONFIG.branch}`,
                        {
                            headers: {
                                'Authorization': `token ${GITHUB_CONFIG.token}`,
                                'Accept': 'application/vnd.github.v3+json'
                            }
                        }
                    );
                    if (checkResponse.ok) {
                        const checkData = await checkResponse.json();
                        sha = checkData.sha;
                    }
                } catch (e) {
                    // File doesn't exist yet, that's fine
                }

                const portfolioData = {
                    heroImage: heroImageUrl,
                    gridImages: gridImages,
                    heroName: heroName,
                    heroColor: heroColor,
                    lastUpdated: new Date().toISOString()
                };

                const content = btoa(JSON.stringify(portfolioData, null, 2));

                const response = await fetch(
                    `https://api.github.com/repos/${GITHUB_CONFIG.owner}/${GITHUB_CONFIG.repo}/contents/portfolio.json`,
                    {
                        method: 'PUT',
                        headers: {
                            'Authorization': `token ${GITHUB_CONFIG.token}`,
                            'Accept': 'application/vnd.github.v3+json',
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            message: 'Update portfolio data',
                            content: content,
                            sha: sha,
                            branch: GITHUB_CONFIG.branch
                        })
                    }
                );

                if (!response.ok) {
                    throw new Error('Failed to save to GitHub');
                }

                console.log('Saved to GitHub successfully');
            } catch (error) {
                console.error('Error saving to GitHub:', error);
                alert('Error saving to GitHub. Please check your configuration and token.');
            } finally {
                isLoading = false;
            }
        }

        // Upload image as blob to GitHub
        async function uploadImageToGitHub(file) {
            const reader = new FileReader();
            
            return new Promise((resolve, reject) => {
                reader.onload = async function(e) {
                    try {
                        // Convert to base64 (remove data URL prefix)
                        const base64Content = e.target.result.split(',')[1];
                        const timestamp = Date.now();
                        const filename = `images/${timestamp}-${file.name.replace(/[^a-zA-Z0-9.-]/g, '_')}`;

                        // Upload as blob to GitHub
                        const response = await fetch(
                            `https://api.github.com/repos/${GITHUB_CONFIG.owner}/${GITHUB_CONFIG.repo}/contents/${filename}`,
                            {
                                method: 'PUT',
                                headers: {
                                    'Authorization': `token ${GITHUB_CONFIG.token}`,
                                    'Accept': 'application/vnd.github.v3+json',
                                    'Content-Type': 'application/json'
                                },
                                body: JSON.stringify({
                                    message: `Upload image ${filename}`,
                                    content: base64Content,
                                    branch: GITHUB_CONFIG.branch
                                })
                            }
                        );

                        if (!response.ok) {
                            throw new Error('Failed to upload image');
                        }

                        const data = await response.json();
                        // Return the raw GitHub content URL
                        const imageUrl = `https://raw.githubusercontent.com/${GITHUB_CONFIG.owner}/${GITHUB_CONFIG.repo}/${GITHUB_CONFIG.branch}/${filename}`;
                        resolve(imageUrl);
                    } catch (error) {
                        reject(error);
                    }
                };
                
                reader.onerror = reject;
                reader.readAsDataURL(file);
            });
        }

        function toggleAdmin() {
            document.getElementById('adminPanel').classList.toggle('active');
        }

        function updateHeroName() {
            heroName = document.getElementById('heroNameInput').value;
            heroColor = document.getElementById('heroColorInput').value;
            
            document.querySelector('.hero-name').textContent = heroName;
            document.querySelector('.hero-name').style.color = heroColor;
            
            saveToGitHub();
        }

        async function uploadHeroImage(event) {
            const file = event.target.files[0];
            if (file && !isLoading) {
                try {
                    isLoading = true;
                    const imageUrl = await uploadImageToGitHub(file);
                    heroImageUrl = imageUrl;
                    document.getElementById('heroImage').src = heroImageUrl;
                    await saveToGitHub();
                    alert('Hero image uploaded successfully!');
                } catch (error) {
                    console.error('Error uploading hero image:', error);
                    alert('Error uploading image. Please check your GitHub configuration.');
                } finally {
                    isLoading = false;
                }
            }
        }

        async function uploadGridImages(event) {
            const files = Array.from(event.target.files);
            
            if (files.length > 0 && !isLoading) {
                try {
                    isLoading = true;
                    
                    for (const file of files) {
                        const imageUrl = await uploadImageToGitHub(file);
                        gridImages.push({
                            id: Date.now() + Math.random(),
                            url: imageUrl
                        });
                    }
                    
                    await saveToGitHub();
                    renderGrid();
                    renderImageManager();
                    alert(`${files.length} image(s) uploaded successfully!`);
                } catch (error) {
                    console.error('Error uploading grid images:', error);
                    alert('Error uploading images. Please check your GitHub configuration.');
                } finally {
                    isLoading = false;
                }
            }
        }

        function renderGrid() {
            const container = document.getElementById('gridContainer');
            
            if (gridImages.length === 0) {
                container.innerHTML = '<div class="empty-state">No images yet. Add some from the admin panel!</div>';
                return;
            }
            
            container.innerHTML = gridImages.map(img => `
                <div class="grid-item">
                    <img src="${img.url}" alt="Portfolio">
                </div>
            `).join('');
        }

        function renderImageManager() {
            const manager = document.getElementById('imageManager');
            
            if (gridImages.length === 0) {
                manager.innerHTML = '<p style="color: #666; font-size: 14px;">No images added yet</p>';
                return;
            }
            
            manager.innerHTML = gridImages.map((img, index) => `
                <div class="image-item">
                    <img src="${img.url}" alt="Thumbnail">
                    <span style="flex: 1; font-size: 14px;">Image ${index + 1}</span>
                    <button onclick="deleteImage('${img.id}')">Delete</button>
                </div>
            `).join('');
        }

        async function deleteImage(id) {
            if (confirm('Delete this image?')) {
                gridImages = gridImages.filter(img => img.id != id);
                await saveToGitHub();
                renderGrid();
                renderImageManager();
            }
        }

        // Close admin panel when clicking outside
        document.addEventListener('click', function(event) {
            const panel = document.getElementById('adminPanel');
            const toggle = document.querySelector('.admin-toggle');
            
            if (panel.classList.contains('active') && 
                !panel.contains(event.target) && 
                !toggle.contains(event.target)) {
                panel.classList.remove('active');
            }
        });
    </script>
</body>
</html>
